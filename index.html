<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8" /><title>Strain Simple Test</title></head>
<body>
  <h2>Strain Test</h2>
  <p>Start: <span id="startWord">cold</span></p>
  <p>End: <span id="endWord">warm</span></p>
  <input id="guessInput" placeholder="Enter next word" />
  <button onclick="submitGuess()">Submit</button>
  <ul id="chainList"><li>cold</li></ul>
  <p id="message"></p>

  <script>
    const startWord = "cold";
    const endWord = "warm";
    const chain = [startWord];
    const guessInput = document.getElementById('guessInput');
    const chainList = document.getElementById('chainList');
    const message = document.getElementById('message');

    function isOneLetterDifferent(w1, w2) {
      if(w1.length !== w2.length) return false;
      let diff=0;
      for(let i=0; i<w1.length; i++) if(w1[i]!==w2[i]) diff++;
      return diff===1;
    }

    async function isValidWord(word) {
      try {
        const res = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
        return res.ok;
      } catch {
        return false;
      }
    }

    async function submitGuess() {
      const guess = guessInput.value.trim().toLowerCase();
      const lastWord = chain[chain.length - 1];
      if(!guess || guess.length !== startWord.length){
        message.textContent = "Guess must be 4 letters.";
        return;
      }
      if(!isOneLetterDifferent(lastWord, guess)){
        message.textContent = "Word must differ by one letter.";
        return;
      }
      if(chain.includes(guess)){
        message.textContent = "Word already used.";
        return;
      }
      message.textContent = "Checking...";
      const valid = await isValidWord(guess);
      if(!valid){
        message.textContent = "Invalid English word.";
        return;
      }
      chain.push(guess);
      chainList.innerHTML += `<li>${guess}</li>`;
      guessInput.value = "";
      guessInput.focus();
      if(guess === endWord){
        message.textContent = `You solved it in ${chain.length-1} moves!`;
      } else {
        message.textContent = "Keep going...";
      }
    }
  </script>
</body>
</html>
